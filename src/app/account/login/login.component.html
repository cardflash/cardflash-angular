<div class="mainContent">
  <h1>Login or register</h1>

  <button
    mat-raised-button
    color="primary"
    class="bigButton"
    (click)="loginWithGoogle()"
  >
    Login With Google
  </button>
  <div class="flexParent">
    <div class="register">
      <h2>Register</h2>
      <form [formGroup]="this.registerForm" (ngSubmit)="register()">
        <mat-form-field appearance="outline">
          <mat-label>E-Mail</mat-label>
          <input
            type="email"
            matInput
            placeholder="your@email.address"
            ngDefaultControl
            formControlName="email"
            autocomplete="email"
          />
          <mat-icon matSuffix>email</mat-icon>
          <mat-hint
            class="validationIndicator"
            position="start"
            *ngIf="
              registerForm.get('email')?.touched &&
              registerForm.get('email')?.errors
            "
            >Email is invalid</mat-hint
          >
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input
            type="password"
            matInput
            ngDefaultControl
            formControlName="password"
            autocomplete="new-password"
          />
          <mat-icon matSuffix>lock</mat-icon>
          <mat-hint
            class="validationIndicator"
            position="start"
            *ngIf="
              registerForm.get('password')?.touched &&
              registerForm.get('password')?.errors
            "
            >Password length must be between {{ getPWMinLength() }} -
            {{ getPWMaxLength() }}</mat-hint
          >
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline">
          <mat-label>Repeat Password</mat-label>
          <input
            type="password"
            matInput
            ngDefaultControl
            formControlName="repeatPassword"
            autocomplete="new-password"
          />
          <mat-icon matSuffix>lock</mat-icon>
        </mat-form-field>
        <br />
        <button mat-raised-button color="primary" class="bigButton">
          Register
        </button>
      </form>
    </div>
    <div class="login">
      <h2>Login</h2>
      <form [formGroup]="this.loginForm" (ngSubmit)="login()">
        <mat-form-field appearance="outline">
          <mat-label>E-Mail</mat-label>
          <input
            type="email"
            matInput
            placeholder="your@email.address"
            ngDefaultControl
            formControlName="email"
            autocomplete="email"
          />
          <mat-icon matSuffix>email</mat-icon>
          <mat-hint
            class="validationIndicator"
            position="start"
            *ngIf="
              loginForm.get('email')?.touched && loginForm.get('email')?.errors
            "
            >Email is invalid</mat-hint
          >
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input
            type="password"
            matInput
            ngDefaultControl
            formControlName="password"
            autocomplete="current-password"
          />
          <mat-icon matSuffix>lock</mat-icon>
          <mat-hint
            class="validationIndicator"
            position="start"
            *ngIf="
              loginForm.get('password')?.touched &&
              loginForm.get('password')?.errors
            "
            >Password length must be between {{ getPWMinLength() }} -
            {{ getPWMaxLength() }}</mat-hint
          >
        </mat-form-field>
        <br />
        <button mat-raised-button color="primary" class="bigButton">
          Login
        </button>
      </form>
    </div>
  </div>
  <div class="verificationStart">
    <mat-icon>email</mat-icon>
    <h3>Start your Email verification</h3>
    <h4>Already registered? Verify your Email address.</h4>
      <p>To make sure your email address is correct, we will send you verification mail with a link to verify it.</p>
      <button mat-stroked-button color="primary" (click)="startVerification()" [disabled]="!this.canStartValidation() || startEmailVerificationDisabled">Start Email Verification</button>
      <p *ngIf="startEmailVerificationDisabled">Please wait a moment before requesting another Email.</p>
  </div>

  <div class="verificationFinish">
    <mat-icon>checkmark</mat-icon>
    <h3>Finish your Email verification</h3>
    <h4>Already got our verification mail?</h4>
      <p>Click on the link included and the following details will be automatically filled in:</p>
      <mat-form-field appearance="outline">
        <mat-label>UserID</mat-label>
        <input
          type="text"
          [(ngModel)]="verifyUserid"
          matInput
        />
        <mat-icon matSuffix>account_circle</mat-icon>
      </mat-form-field>
      <br>
      <mat-form-field appearance="outline">
        <mat-label>Secret</mat-label>
        <input
          type="password"
          [(ngModel)]="verifySecret"
          matInput
        />
        <mat-icon matSuffix>security</mat-icon>
      </mat-form-field>
      <br/>
      <button mat-stroked-button color="primary" (click)="verifyEmail()" >Verify Email</button>
 </div>
</div>
